<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ログイン</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <style>
        body {
            background-color: #0f1419;
            color: #fff;
            position: relative;
            overflow: hidden;
        }
        
        .card {
            background-color: rgba(42, 49, 61, 0.9);
            border: none;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .card-header {
            background-color: rgba(28, 34, 43, 0.9);
            color: #fff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .form-control, .form-select {
            background-color: rgba(30, 37, 47, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
        }
        
        .form-control:focus, .form-select:focus {
            background-color: rgba(38, 46, 59, 0.7);
            border-color: rgba(255, 255, 255, 0.4);
            color: #fff;
            box-shadow: 0 0 0 0.25rem rgba(255, 255, 255, 0.15);
        }
        
        .btn-primary {
            background-color: #375a7f;
            border-color: #375a7f;
        }
        
        .btn-primary:hover {
            background-color: #2b4764;
            border-color: #2b4764;
        }
        
        .snowflake {
            position: absolute;
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div id="snow-container"></div>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">ログイン</h3>
                    </div>
                    <div class="card-body">
                        <!-- 登録成功メッセージ -->
                        <div class="alert alert-success" th:if="${successMessage}" th:text="${successMessage}"></div>
                        
                        <!-- ログインエラーメッセージ -->
                        <div class="alert alert-danger" th:if="${param.error}">
                            メールアドレスまたはパスワードが正しくありません。
                        </div>
                        
                        <form th:action="@{/login}" method="post">
                            <div class="mb-3">
                                <label for="email" class="form-label">メールアドレス</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                            <div class="mb-3">
                                <label for="password" class="form-label">パスワード</label>
                                <input type="password" class="form-control" id="password" name="password" required>
                            </div>
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary">ログイン</button>
                                <a href="/register" class="btn btn-link text-light">新規管理者登録</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const snowContainer = document.getElementById('snow-container');
            const maxSnowflakes = 100;
            
            // 雪を作成
            for (let i = 0; i < maxSnowflakes; i++) {
                createSnowflake();
            }
            
            function createSnowflake() {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                
                // ランダムなサイズ (3px〜8px)
                const size = Math.random() * 5 + 3;
                snowflake.style.width = size + 'px';
                snowflake.style.height = size + 'px';
                
                // ランダムな透明度 (0.3〜0.9)
                snowflake.style.opacity = Math.random() * 0.6 + 0.3;
                
                // 初期位置をランダムに
                const startPositionX = Math.random() * window.innerWidth;
                const startPositionY = -50;
                
                snowflake.style.left = startPositionX + 'px';
                snowflake.style.top = startPositionY + 'px';
                
                // 雪を画面に追加
                snowContainer.appendChild(snowflake);
                
                // 雪を落とすアニメーション
                fallSnowflake(snowflake);
            }
            
            function fallSnowflake(snowflake) {
                // 落下速度をランダムに (1〜3秒)
                const fallSpeed = Math.random() * 2 + 1;
                
                // 水平方向の揺れ具合
                const swingAmount = Math.random() * 3 + 1;
                
                // 初期位置
                let positionX = parseFloat(snowflake.style.left);
                let positionY = parseFloat(snowflake.style.top);
                
                // 水平方向の揺れの方向
                let swingDirection = Math.random() > 0.5 ? 1 : -1;
                
                function updatePosition() {
                    // 垂直方向の移動
                    positionY += fallSpeed;
                    
                    // 水平方向に揺れる動き
                    if (Math.random() > 0.98) {
                        swingDirection *= -1;
                    }
                    
                    positionX += swingDirection * (Math.random() * swingAmount);
                    
                    // 雪の位置を更新
                    snowflake.style.left = positionX + 'px';
                    snowflake.style.top = positionY + 'px';
                    
                    // 画面外に出たら再配置
                    if (positionY > window.innerHeight) {
                        positionX = Math.random() * window.innerWidth;
                        positionY = -50;
                        snowflake.style.left = positionX + 'px';
                        snowflake.style.top = positionY + 'px';
                    }
                    
                    requestAnimationFrame(updatePosition);
                }
                
                updatePosition();
            }
        });
    </script>
</body>
</html>
